{% extends "base.html" %}

<!-- 自定义二次元风格模板 -->
{% block extrahead %}
  <!-- 自定义CSS -->
  <link rel="stylesheet" href="{{ 'assets/stylesheets/anime-style.css' | url }}">
  <link rel="stylesheet" href="{{ 'assets/stylesheets/anime-components.css' | url }}">
  <link rel="stylesheet" href="{{ 'assets/stylesheets/theme-switcher.css' | url }}">
  
  <!-- 自定义字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&family=Cute+Font&display=swap" rel="stylesheet">
  
  <!-- 额外的meta标签 -->
  <meta name="theme-color" content="#ff6b9d">
  <meta name="msapplication-TileColor" content="#ff6b9d">
  
  <!-- 自定义样式 -->
  <style>
    /* 字体设置 */
    body, .md-typeset {
      font-family: 'Noto Sans SC', 'Cute Font', sans-serif !important;
    }
    
    /* 页面背景 */
    body {
      background: linear-gradient(135deg, #ffeef8 0%, #fff0f5 100%) !important;
      background-attachment: fixed;
    }
    
    /* 自定义加载动画 */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }
    
    .loading-content {
      text-align: center;
      color: white;
    }
    
    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .loading-text {
      font-size: 18px;
      font-weight: 500;
      margin-top: 10px;
    }
    
    /* 隐藏加载动画 */
    .loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }
  </style>
{% endblock %}

<!-- 自定义页面内容 -->
{% block content %}
  <!-- 加载动画 -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">🌸 加载中... 🌸</div>
    </div>
  </div>
  
  <!-- 原始内容 -->
  {{ super() }}
{% endblock %}

<!-- 自定义脚本 -->
{% block scripts %}
  {{ super() }}
  
  <!-- 自定义JavaScript -->
  <script src="{{ 'assets/javascripts/anime-effects.js' | url }}"></script>
  <script src="{{ 'assets/javascripts/theme-switcher.js' | url }}"></script>
  
  <!-- 页面加载完成后隐藏加载动画 -->
  <script>
    window.addEventListener('load', function() {
      setTimeout(function() {
        const loadingOverlay = document.getElementById('loadingOverlay');
        if (loadingOverlay) {
          loadingOverlay.classList.add('hidden');
          setTimeout(function() {
            loadingOverlay.remove();
          }, 500);
        }
      }, 1000);
    });
    
    // 添加页面切换动画
    document.addEventListener('DOMContentLoaded', function() {
      // 监听导航链接点击
      const navLinks = document.querySelectorAll('a[href^="/"], a[href^="."]');
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          // 添加页面切换效果
          const content = document.querySelector('.md-content');
          if (content) {
            content.style.transform = 'scale(0.95)';
            content.style.opacity = '0.7';
            content.style.transition = 'all 0.3s ease';
          }
        });
      });
    });
    
    // 添加自定义控制台欢迎信息
    console.log('%c🌸 欢迎来到 CNC-CMD 知识共享平台 🌸', 'color: #ff6b9d; font-size: 20px; font-weight: bold;');
    console.log('%c这是一个充满二次元风格的知识分享平台！', 'color: #c44569; font-size: 14px;');
    console.log('%c如果你喜欢这个设计，欢迎为我们的项目点星⭐', 'color: #f8b500; font-size: 12px;');
  </script>
{% endblock %}

<!-- 自定义页脚 -->
{% block footer %}
  <footer class="md-footer">
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
            🌸 Made with ❤️ by CNC-CMD Team 🌸
          </div>
          <div style="margin-top: 10px; font-size: 12px; opacity: 0.8;">
            Powered by MkDocs & Material Theme with Anime Style ✨
          </div>
        </div>
        
        {% if config.repo_url %}
          <div class="md-footer-social">
            <a href="{{ config.repo_url }}" target="_blank" rel="noopener" 
               style="color: white; text-decoration: none; margin: 0 10px;">
              <span style="font-size: 20px;">⭐</span> Star us on GitHub
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </footer>
{% endblock %}